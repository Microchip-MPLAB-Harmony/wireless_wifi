<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="WINC Firmware Update Guide" />
<meta name="DC.relation" scheme="URI" content="GUID-4EC8AD6B-F2ED-4E18-965F-82C5B8A3028F.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="winc-firmware-update-guide" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>WINC Firmware Update Guide</title>
<meta name="Microsoft.Help.Id" content="GUID-8B137D7B-852A-471A-8E47-463DF557852F-winc-firmware-update-guide" />
<meta name="Microsoft.Help.TocParent" content="GUID-8B137D7B-852A-471A-8E47-463DF557852F" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony Wireless WiFi PIC32MZW1 Reference A 04/2022" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-9D7FF72B-E648-4E12-A908-7D722938C12A"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="winc-firmware-update-guide">
<h1 class="title topictitle1" id="ariaid-title1">WINC Firmware Update Guide</h1><div class="body"></div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-4EC8AD6B-F2ED-4E18-965F-82C5B8A3028F.html">MPLAB® Harmony WINC WLAN Library</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="mplab-harmony-integrated-software-framework"><h2 class="title topictitle2" id="ariaid-title2">MPLAB Harmony Integrated Software Framework</h2><div class="body"><p class="p">This document explains the WINC Firmware Upgrade Process.</p>
</div>
</div>
<div class="topic nested1" aria-labelledby="ariaid-title3" id="description"><h2 class="title topictitle2" id="ariaid-title3">Description</h2><div class="body"><div class="p">The ATWINC1500 and ATWINC3400 WiFi devices require firmware to be loaded into flash memory to operate. These devices will come shipped with firmware preloaded, however it may become necessary to update this firmware to take advantage of fixes and new or expanded features. MPLAB Harmony 3 and later include the WINC Firmware Update utilities required to update the flash firmware of the WINC devices. These utilities can be found in the <span class="undefined_element">/utilities/wifi/winc directory.</span><p class="p">User has to follow below steps to update the WINC module firmware
•	From the 'wireless_wifi' repo, at 'wireless_wifi\apps\serial_bridge' program the serial bridge application.
•	The application will put host device in serial bridge mode, where it will take the WINC module image from laptop utility and program into WINC module.
•	Below example show SAMD21 Xplained connected to WINC1500 Xplained on EXT1 for upgrading the WINC15x0 module firmware.</p>
<br /><img class="image" src="GUID-F1597C14-55BD-4657-886B-C3DC43D978CE.png" alt="Microchip-Technology" /><br /></div>
</div>
<div class="topic nested2" aria-labelledby="ariaid-title4" id="firmware-update-utilities"><h3 class="title topictitle3" id="ariaid-title4">Firmware Update Utilities</h3><div class="body"><p class="p">Updating a WINC device requires two utilities, an Image Tool which builds a file containing the changes required to the WINCs flash memory and a WINC Programming Tool which applies the changes to the WINC device.</p>
</div>
<div class="topic nested3" aria-labelledby="ariaid-title5" id="image-tool"><h4 class="title topictitle4" id="ariaid-title5">Image Tool</h4><div class="body"><div class="p">The Image Tool is responsible for constructing an image of the WINCs flash memory from components such as firmware files, certificates and other data and creating a change description file which can be passed to the WINC Programmer to be applied to a WINC device.
The Image Tool is located in the <span class="undefined_element">/utilities/wifi/winc directory. Each WINC firmware release will consists of a configuration file and a number of firmware and other files. The configuration file is presented to the Image Tool and is processed, in whole or in part to produce and output file. An example directory layout of a WINC firmware release is:</span><p class="p">The configuration file, config.txt, is in the winc1500_19.7.7 directory. There are three subdirectories in this release:
• Firmware – contains firmware which runs on the WINC device.
• HTTP Files – contains files which are loaded into the HTTP web server made available by the WINC device when it
enters a provisioning Soft-AP mode.</p>
<p class="p">User can modify the config.txt file to add/remove devices certificate and customized the provisioning page.</p>
<p class="p"><span class="xref"></span>
type is root certificates
schema is 2
size is 4K
default is 0xff</p>
<p class="p">file is winc3400_1.3.1/root_certs/BaltimoreCyberTrustRoot.cer
file is winc3400_1.3.1/root_certs/DigiCert.cer
file is winc3400_1.3.1/root_certs/DigiCertSHA2.cer
file is winc3400_1.3.1/root_certs/EnTrust.cer
file is winc3400_1.3.1/root_certs/GeoTrust.cer
file is winc3400_1.3.1/root_certs/GlobalSignRoot.cer
file is winc3400_1.3.1/root_certs/cas.cer
file is winc3400_1.3.1/root_certs/caswin.cer
file is winc3400_1.3.1/root_certs/QuoVadis_Root.cer
file is winc3400_1.3.1/root_certs/VeriSign.cer</p>
</div>
<div class="topic nested4" aria-labelledby="ariaid-title6" id="image-tool__generating-device-programming-files"><h5 class="title topictitle5" id="ariaid-title6">Generating Device Programming Files</h5><div class="body"><p class="p">The following command line will generate a device programming file winc1500_19.6.1.prog.</p>
<blockquote class="lq"><p class="p">image_tool.exe -c winc1500_19.6.1\config.txt -o winc1500_19.6.1.prog -of prog</p>
</blockquote>
<p class="p">The file produced can be used to upgrade a WINC1500 to version 19.6.1 including the firmware, HTTP files and root
certificates.</p>
</div>
</div>
</div>
<div class="topic nested4" aria-labelledby="ariaid-title7" id="winc-programmer"><h5 class="title topictitle5" id="ariaid-title7">WINC Programmer</h5><div class="body"><p class="p">The WINC Programmer is responsible for reading, erasing and writing the flash memory of the WINC device. A device programming file can be provided to the tool to update the flash memory contents. The WINC Programmer is located in the <span class="undefined_element">/utilities/wifi/winc directory.</span></p>
<div class="topic nested5" aria-labelledby="ariaid-title8" id="winc-programmer__programming-device"><h6 class="title topictitle6" id="ariaid-title8">Programming Device</h6><div class="body"><p class="p">The following command line will program a WINC1500 device via the serial port COM29.</p>
<blockquote class="lq"><p class="p">winc_programmer -p COM29 -d winc1500 -i winc1500_19.6.1.prog -if prog -w -r -pfw winc1500_19.6.1\firmware\programmer_firmware_3A0.bin</p>
</blockquote>
<p class="p">Output:</p>
<p class="p">WINC Programming Tool 1.0.0 <span class="xref"></span> (Jun 27 2018)
Copyright (C) Microchip Technology Inc. 2018
WINC serial bridge found
chip ID is 0x001503a0
programming fw file: winc1500_19.6.1\firmware\programmer_firmware_3A0.bin
starting device
reinitialise serial bridge to 500000
waiting for firmware to run
flash ID 0x001440ef
flash size is 8 Mb
begin write operation
0x000000:<span class="xref"></span> 0x008000:<span class="xref"></span> 0x010000:<span class="xref"></span> 0x018000:<span class="xref"></span>
0x020000:<span class="xref"></span> 0x028000:<span class="xref"></span> 0x030000:<span class="xref"></span> 0x038000:<span class="xref"></span>
0x040000:<span class="xref"></span> 0x048000:<span class="xref"></span> 0x050000:<span class="xref"></span> 0x058000:<span class="xref"></span>
0x060000:<span class="xref"></span> 0x068000:<span class="xref"></span> 0x070000:<span class="xref"></span> 0x078000:<span class="xref"></span>
0x080000:<span class="xref"></span> 0x088000:<span class="xref"></span> 0x090000:<span class="xref"></span> 0x098000:<span class="xref"></span>
0x0a0000:<span class="xref"></span> 0x0a8000:<span class="xref"></span> 0x0b0000:<span class="xref"></span> 0x0b8000:<span class="xref"></span>
0x0c0000:<span class="xref"></span> 0x0c8000:<span class="xref"></span> 0x0d0000:<span class="xref"></span> 0x0d8000:<span class="xref"></span>
0x0e0000:<span class="xref"></span> 0x0e8000:<span class="xref"></span> 0x0f0000:<span class="xref"></span> 0x0f8000:<span class="xref"></span>
begin read operation
0x000000:<span class="xref"></span> 0x008000:<span class="xref"></span> 0x010000:<span class="xref"></span> 0x018000:<span class="xref"></span>
0x020000:<span class="xref"></span> 0x028000:<span class="xref"></span> 0x030000:<span class="xref"></span> 0x038000:<span class="xref"></span>
0x040000:<span class="xref"></span> 0x048000:<span class="xref"></span> 0x050000:<span class="xref"></span> 0x058000:<span class="xref"></span>
0x060000:<span class="xref"></span> 0x068000:<span class="xref"></span> 0x070000:<span class="xref"></span> 0x078000:<span class="xref"></span>
0x080000:<span class="xref"></span> 0x088000:<span class="xref"></span> 0x090000:<span class="xref"></span> 0x098000:<span class="xref"></span>
0x0a0000:<span class="xref"></span> 0x0a8000:<span class="xref"></span> 0x0b0000:<span class="xref"></span> 0x0b8000:<span class="xref"></span>
0x0c0000:<span class="xref"></span> 0x0c8000:<span class="xref"></span> 0x0d0000:<span class="xref"></span> 0x0d8000:<span class="xref"></span>
0x0e0000:<span class="xref"></span> 0x0e8000:<span class="xref"></span> 0x0f0000:<span class="xref"></span> 0x0f8000:<span class="xref"></span></p>
<p class="p">verify range 0x000000 to 0x100000
begin verify operation
0x000000:<span class="xref"></span> 0x008000:<span class="xref"></span> 0x010000:<span class="xref"></span> 0x018000:<span class="xref"></span>
0x020000:<span class="xref"></span> 0x028000:<span class="xref"></span> 0x030000:<span class="xref"></span> 0x038000:<span class="xref"></span>
0x040000:<span class="xref"></span> 0x048000:<span class="xref"></span> 0x050000:<span class="xref"></span> 0x058000:<span class="xref"></span>
0x060000:<span class="xref"></span> 0x068000:<span class="xref"></span> 0x070000:<span class="xref"></span> 0x078000:<span class="xref"></span>
0x080000:<span class="xref"></span> 0x088000:<span class="xref"></span> 0x090000:<span class="xref"></span> 0x098000:<span class="xref"></span>
0x0a0000:<span class="xref"></span> 0x0a8000:<span class="xref"></span> 0x0b0000:<span class="xref"></span> 0x0b8000:<span class="xref"></span>
0x0c0000:<span class="xref"></span> 0x0c8000:<span class="xref"></span> 0x0d0000:<span class="xref"></span> 0x0d8000:<span class="xref"></span>
0x0e0000:<span class="xref"></span> 0x0e8000:<span class="xref"></span> 0x0f0000:<span class="xref"></span> 0x0f8000:<span class="xref"></span>
verify passed</p>
</div>
</div>
</div>
</div>
<div class="topic nested4" aria-labelledby="ariaid-title9" id="conclusion"><h5 class="title topictitle5" id="ariaid-title9">Conclusion</h5><div class="body"><p class="p">Once verified, the Firmware has been updated. The WINC module now contains the updated Firmware and it can be used with any other application of choice.</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>